<!DOCTYPE html>
<title>Beatsaber Space</title>
<script src="https://cdn.jsdelivr.net/combine/npm/three@0.96.0/build/three.min.js,npm/altspace@2.9.0/dist/altspace.min.js,npm/altspacevr-behaviors@1.1.5/js/altspaceutil.min.js"></script>
<script>
	altspaceutil.getFullspaceApp().then(app => {
		altspace.getUser().then(user => {
			let whitelistedUserIds = [/* list of userids to whitelist (in per-domain format) */];
			let isWhitelistedUser = (user.isModerator || (whitelistedUserIds.length > 0 && whitelistedUserIds.indexOf(user.userId) >= 0));

			elapsedTime = 0;

			function createStageLock() {
				// Create Floor Locks To Keep Player In Place
				let stageLock = new THREE.Mesh(new THREE.BoxBufferGeometry(1, 1, 1), new THREE.MeshBasicMaterial({ visible: false }));
				altspaceutil.setCursorCollider(stageLock, true);
				stageLock.addBehavior(new altspaceutil.behaviors.NativeComponent('n-mesh-collider', { convex: true }));
				app.anchor.add(stageLock);
				stageLock.position.set(-59.49, 5.51, -57.14);
				stageLock.scale.set(17.94579,38.66379,24.84183)

				app.anchor.add(stageLock);
				stageLock.visible = true;
				stageLock.traverse(child => {
					child.visible = stageLock.visible;
				});
			}

			if(!altspace.inClient) {
				if(isWhitelistedUser) {
					createStageLock();
				}
			}
				
			});
		}).catch(e => console.log(e));
</script>